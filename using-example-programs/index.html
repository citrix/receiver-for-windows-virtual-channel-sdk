<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Using Example Programs - Citrix Virtual Channel SDK for Citrix Receiver for Windows</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link rel="stylesheet" href="../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "Using Example Programs";
    var mkdocs_page_input_path = "using-example-programs.md";
    var mkdocs_page_url = "/using-example-programs/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/custom.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs" 
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../system-requirements/">System Requirements</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../build-process/">Build Process</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../using-the-sdk/">Using the Virtual Channel SDK</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <span class="expli"><i class="fa fa-plus-square-o" aria-hidden="true"></i></span><a class="current" style="width:250px;" href="./">Using Example Programs</a>
        
            <ul style="display:none">
            
                <li class="toctree-l3"><a href="#using-example-programs">Using Example Programs</a></li>
                
                    <li><a class="toctree-l4" href="#ping">Ping</a></li>
                
                    <li><a class="toctree-l4" href="#mix">Mix</a></li>
                
                    <li><a class="toctree-l4" href="#over">Over</a></li>
                
                    <li><a class="toctree-l4" href="#building-examples">Building Examples</a></li>
                
                    <li><a class="toctree-l4" href="#preparing-and-deploying-a-virtual-driver">Preparing and Deploying a Virtual Driver</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../programming-guide/">Programming Guide</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../programming-reference/">Programming Reference</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Using Example Programs</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <h1 id="using-example-programs"><a class="toclink" href="#using-example-programs">Using Example Programs</a></h1>
<p>The example programs included with the Virtual Channel SDK are
buildable, working virtual channels. Use these examples to:</p>
<ul>
<li>Verify your Virtual Channel SDK is correct by building a known working example program.</li>
<li>Provide working examples of code that can be modified to suit your requirements.</li>
<li>Explore the features and functionality provided in the Virtual Channel SDK.</li>
</ul>
<p>Each of these example programs comprises a client virtual driver and a
server application. The server-side application is run from the command
line within an ICA session. A single virtual channel comprises an
application pair.</p>
<p>The example programs included with the Virtual Channel SDK are:</p>
<ul>
<li>Ping: Records the round-trip delay time for a test packet sent over a virtual channel.</li>
<li>Mix: Demonstrates a mechanism to call functions (for example, to get the time of day) on a remote client.</li>
<li>Over: Simple asynchronous application that demonstrates how to code an application where the server must receive a response from the client asynchronously, and where the type of packet being sent to the client is different from the type received.</li>
</ul>
<p>Each example includes a description of the program, packet format, and
other necessary information.</p>
<h2 id="ping"><a class="toclink" href="#ping">Ping</a></h2>
<p>Ping is a simple program that records the round-trip delay time
for a test packet sent over a virtual channel. The server sends a packet to the client and the
client responds with a packet containing the time it received the original packet from the
server. This sequence is repeated a specified number of times, and then the program displays
the round-trip time for each ping and the average round-trip delay time.</p>
<p>For this example, there is no significant difference between a BEGIN
packet and an END packet. The two types of packets are provided as an example for
writing your own virtual channel protocols.</p>
<p>This program demonstrates:</p>
<ul>
<li>How to transfer data synchronously. The sequence of events is:
{SrvWrite, ClntRead, ClntWrite, SrvRead} {SrvWrite, ClntRead} {...}.
The server waits for the client to reply before sending the next
packet.</li>
<li>How to read parameter data (in this case, the number of times to send
packets to the client) from the Module.ini files.</li>
</ul>
<h3 id="packet-format"><a class="toclink" href="#packet-format">Packet Format</a></h3>
<p>The following packet is exchanged between the client and the server.</p>
<div class="codehilite"><pre><span></span>typedef struct  PING  {
USHORT          uSign;              // Signature
USHORT          uType;              // Type, BEGIN or END, from server
USHORT          uLen;               // Packet length from server
USHORT          uCounter;           // Sequencer
ULONG           ulServerMS;         // Server millisecond clock
ULONG           ulClientMS;         // Client millisecond clock
} PING, *PPING;
</pre></div>


<h2 id="mix"><a class="toclink" href="#mix">Mix</a></h2>
<p>Mix demonstrates a mechanism that can be used to call functions on a remote client (for example to get the time of day). This program demonstrates an extensible scheme for making function calls from the server to the client that allows the server to specify when it expects a response from the client and when it does not. This method can increase performance, because the server does not have to constantly wait for a reply from the client.</p>
<p>The server calls a series of simple functions:</p>
<ul>
<li>Add No: Add two numbers and return the sum as the return value.</li>
<li>Disp Str: Write a string to the log file. There is no return value (write-only function).</li>
<li>Gettime: Read the client time and return it as the return value.</li>
</ul>
<p>The actual implementation of these functions is on the client side. The server conditionally waits for the response from the client, depending on the function being executed. For example, the server waits for the result of the AddNo or Gettime function, but not the write- only function DispStr, which returns no result.</p>
<h3 id="packet-format_1"><a class="toclink" href="#packet-format_1">Packet Format</a></h3>
<div class="codehilite"><pre><span></span>typedef struct MIXHEAD {                                        
USHORT          uType               // Packet type
USHORT          uFunc;              // Index of Function
ULONG           uLen;               // Length of data
USHORT          fRetReq;            // True if return
ULONG           dwRetVal;           // Return Value from client
USHORT          dwLen1;             // length of data
USHORT          dwLen2;             // length of data
}       MIXHEAD, \*PMIXHEAD;                 
</pre></div>


<p>The data consists of the above structure followed by the arguments to
the function being called. uLen is the total length of the data being
sent, including the arguments. DwLen1 is the length of the data pointed
to by a pointer argument.</p>
<h3 id="sequence-of-events"><a class="toclink" href="#sequence-of-events">Sequence of Events</a></h3>
<p>This figure illustrates the sequence of events that occurs when you use
the Mix program, starting at the top.</p>
<p><img alt="" src="../mix-sequence.png" /></p>
<h2 id="over"><a class="toclink" href="#over">Over</a></h2>
<p>Over is a simple asynchronous application. It demonstrates how to code an application in which the server must receive a response from the client asynchronously, and the type of packet being sent to the client is different from the type received.</p>
<p>When the Over program begins, it:</p>
<ol>
<li>Spawns a thread that waits for a response from the client.</li>
<li>Begins sending data packets with sequence numbers to the client.</li>
<li>(After sending the last packet of data) sends a packet with a sequence number of NO_MORE_DATA, and then closes the connection.</li>
</ol>
<p>The client receives packets and inspects the sequence number. For
every sequence number divisible by 10, the client increases the
sequence number by 7 and sends a response to the server. These numbers
are chosen arbitrarily to demonstrate that the client can
asynchronously send data to the server at any time.</p>
<p>The packet type used to send data from the server to the client is
different from the packet type used to receive data from the client.</p>
<h3 id="packet-format-from-server-to-client"><a class="toclink" href="#packet-format-from-server-to-client">Packet Format - From Server to Client</a></h3>
<div class="codehilite"><pre><span></span>            typedef struct OVER  {
             USHORT         uSign;              // Signature
             USHORT         uType;              // Type, BEGIN or END, from server
             USHORT         uLen;               // Packet length from server
             USHORT         uCounter;           // Sequencer
             ULONG          ulServerMS;         // Server millisecond clock
            } OVER, *POVER;
</pre></div>


<h3 id="packet-format-from-client-to-server"><a class="toclink" href="#packet-format-from-client-to-server">Packet Format - From Client to Server</a></h3>
<div class="codehilite"><pre><span></span>            typedef struct DRVRESP  {
             USHORT         uType;              // Type OVERFLOW_JUMP from client
             USHORT         uLen;               // Packet length from client
             USHORT         uCounter;           // Sequencer
            } DRVRESP, *PDRVRESP;
</pre></div>


<h3 id="sequence-of-events_1"><a class="toclink" href="#sequence-of-events_1">Sequence of Events</a></h3>
<p>This figure illustrates the sequence of events that occurs when you
use the Over program, starting at the top.</p>
<p><img alt="" src="../over-sequence.png" /></p>
<h2 id="building-examples"><a class="toclink" href="#building-examples">Building Examples</a></h2>
<h3 id="building-a-server-side-example-using-nmake"><a class="toclink" href="#building-a-server-side-example-using-nmake">Building a Server- side Example using NMAKE</a></h3>
<ol>
<li>
<p>Change to the vcsdk\src\examples\vc\server\ subdirectory.</p>
</li>
<li>
<p>At a command prompt, type <code>NMAKE clean all</code>.</p>
</li>
<li>
<p>To build an individual server example, run NMAKE from the example subdirectory. </p>
</li>
</ol>
<h3 id="building-a-server-side-example-using-visual-studio-or-net"><a class="toclink" href="#building-a-server-side-example-using-visual-studio-or-net">Building a Server- side Example using Visual Studio or .NET</a></h3>
<ol>
<li>
<p>Create a new Win32 console project. Citrix recommends that the
    project name be associated with the example (for
    example, ctxping). You can set the location of the project to the
    src\examples\vc\server directory so that the .c source files
    are readily available.</p>
</li>
<li>
<p>Add the following directories to include the search path of the C++
    preprocessor in the project settings (where vcsdk is the directory
    for the Virtual Channel SDK):</p>
<ul>
<li>vcsdk\src\examples\vc\shared\inc</li>
<li>vcsdk\src\shared\inc\Citrix</li>
</ul>
</li>
<li>
<p>Point to the wfapi include and library paths. Open file wfapi.mak
    from vcsdk installation path\src\examples\build.</p>
<ul>
<li>Set WFAPILIB to the full path of WFAPI lib directory.</li>
<li>Set WFAPIINC to the full path of WFAPI include directory. </li>
</ul>
</li>
</ol>
<p>The WFAPI SDK installs Wfapi.lib into the designated library directory. </p>
<h3 id="building-a-client-side-example-for-win-32-using-nmake"><a class="toclink" href="#building-a-client-side-example-for-win-32-using-nmake">Building a Client- side Example for Win 32 using NMAKE</a></h3>
<ol>
<li>
<p>Browse to the Visual Studios Common tools folder and run <code>vsvars32.bat</code>.</p>
</li>
<li>
<p>Open user.mak in the <vcsdk path>\src\examples\build directory.</p>
<ul>
<li>Set the paths corresponding to your installation of Visual Studio</li>
<li>Set the paths corresponding to your installation of the Windows SDK.</li>
<li>Set the paths corresponding to your installation of WFAPI.</li>
</ul>
</li>
<li>
<p>Open wfapi.mak in the <vcsdk path>\src\examples\build directory. Set the paths
    corresponding to your installation of WFAPI.</p>
</li>
<li>
<p>Change to directory <vcsdk path>\src\examples\vc.</p>
</li>
<li>
<p>For each example you want to build, type </p>
<ul>
<li><code>cd client\example</code></li>
<li><code>nmake win32.cln</code></li>
</ul>
</li>
<li>
<p>To build the retail modules, type <code>nmake win32</code></p>
</li>
<li>
<p>To build the debug modules, type <code>nmake win32.dbg</code></p>
</li>
</ol>
<h3 id="building-a-client-side-example-for-win-32-using-visual-studio"><a class="toclink" href="#building-a-client-side-example-for-win-32-using-visual-studio">Building a Client-side Example for Win 32 using Visual Studio</a></h3>
<ol>
<li>
<p>For all platforms, the virtual channel driver DLL must export the
    Load function. You can do this with either a .DEF file or by
    specifying it as a compiler option in your Visual Studio
    project setting.</p>
</li>
<li>
<p>Make sure the calling convention is set to stdcall.</p>
</li>
</ol>
<h2 id="preparing-and-deploying-a-virtual-driver"><a class="toclink" href="#preparing-and-deploying-a-virtual-driver">Preparing and Deploying a Virtual Driver</a></h2>
<p>Before installing a virtual driver on a client, copy the virtual
driver for the platform to the client device and configure the client
MSI.</p>
<ol>
<li>
<p>Copy the appropriate virtual driver for the platform to the
    directory on the device where the client is installed. The virtual
    driver is the .Dll file in
    <code>\src\examples\vc\client\driver\platform\obj\retail</code>, where
    driver is <code>vdmix</code>, <code>vdover</code>, or <code>vdping</code>. The default installation
    directory is <code>%SystemDrive%\Program Files\Citrix\ICA Client</code>.</p>
</li>
<li>
<p>Open the standard client MSI package with the Microsoft packaging
    tools (for example, Orca in the Windows Installer SDK).</p>
</li>
<li>
<p>Add the virtual channel .DLL to the MSI package.</p>
</li>
<li>
<p>Modify the Configuration Storage file <code>/configuration/module.ini</code>.</p>
</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Warning<p>Editing the Registry incorrectly can cause serious problems
that may require you to reinstall your operating system. Citrix cannot
guarantee that problems resulting from the incorrect use of Registry
Editor can be solved. Use the Registry Editor at your own risk. Be
sure to back up the registry before you edit it.</p>
</p>
</div>
<ul>
<li>Locate the VirtualDriverEx string REG_SZ value in the HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\ICAClient\Engine\Configuration\Advanced\Modules\ICA3.0 key. Append the name of the virtual driver to the end of this line, for example: <code>VirtualDriverEx = VDPING</code>.</li>
<li>Under the <code>HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\ICAClient\Engine\Configuration\Advanced\Modules</code> key, create a new <driver> key, where <driver>; is VDMIX, VDOVER, VDPING. For VDPING, the section would be: <code>HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\ICAClient\Engine\Configuration\Advanced\Modules\ VDPING</code>. Add the following string REG_SZ values under the above key:</li>
</ul>
<div class="codehilite"><pre><span></span>DriverName          = VDPING.DLL
DriverNameWin16     = VDPINGW.DLL
DriverNameWin32     = VDPINGN.DLL
PingCount           = 3
</pre></div>


<p>The client engine uses DriverName, DriverNameWin16, and
DriverNameWin32 to determine the module filename to load for each
platform. PingCount is a tunable parameter used by the Ping virtual
channel.</p>
<p>&#53;. Repackage the MSI for deployment. </p>
<h3 id="to-deploy-the-msi"><a class="toclink" href="#to-deploy-the-msi">To deploy the MSI</a></h3>
<p>Deploy your MSI package with Windows Active Directory Services or
Microsoft Systems Management Server. See your Windows or Systems
Management Server documentation for more information. No further
configuration is necessary.</p>
<h3 id="to-add-a-virtual-channel-after-installation"><a class="toclink" href="#to-add-a-virtual-channel-after-installation">To add a virtual channel after installation</a></h3>
<p>Because the Module.ini file is installed in the registry, modifying
the file after installation has no effect. To add a virtual channel
after installation, use the Group Policy template or change the
registry keys corresponding to those in the Module.ini file at the
following registry location:</p>
<div class="codehilite"><pre><span></span>HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\ICAClient\Engine\Configuration\Advanced\Modules
</pre></div>


<h3 id="running-an-example-virtual-channel"><a class="toclink" href="#running-an-example-virtual-channel">Running an Example Virtual Channel</a></h3>
<ol>
<li>
<p>On a client configured with the client-side example, connect to a
    server running XenApp/XenDesktop with the associated
    server-side example.</p>
</li>
<li>
<p>Within the ICA session, run the server-side executable.</p>
</li>
</ol>
<p>The server-side example queries the client-side virtual driver, and
then displays the driver information. Use the -d parameter to display detailed information.</p>
<p>For Ping only: CTXPING sends PingCount separate pings. PingCount has a
default value of three, but can be set in the [Ping] section of the
Module.ini file. Each ping consists of a BEGIN packet and an END
packet.</p>
<h3 id="debugging-a-win32-virtual-driver"><a class="toclink" href="#debugging-a-win32-virtual-driver">Debugging a Win32 virtual driver</a></h3>
<p>Use the TRACE feature to log events on the client. To enable the TRACE
statements, you must build the debug version of the virtual driver. When
the debug module is installed on the client, the TRACE statements write
the debug information to a file.</p>
<p>At run time, you can specify which class and event flags to trace. This
allows you to trace only the sections you need, minimizing performance
degradation.</p>
<p>The class flag for virtual channels is 00000080. For the complete list
of class and event flags, see Logflags.h (in src\inc).</p>
<ol>
<li>
<p>Compile the debug version of the virtual driver for the
    client platform.</p>
</li>
<li>
<p>If it is running, close the client on the client device.</p>
</li>
<li>
<p>Copy the compiled debug version of the library into the directory on
    the client device where the client is installed. For example, for
    the Ping example, copy VdpingN.dll to \Citrix\ICA Client.</p>
</li>
<li>
<p>Change to the directory containing the client and type:</p>
</li>
</ol>
<div class="codehilite"><pre><span></span>wfcrun32 connection /c:xxxxxxxx /e:yyyyyyyy /logfile:filename 
</pre></div>


<p>where:
<em> connection is the name of the connection in Remote Application
Manager.
</em> xxxxxxxx are the event flags you want to log.
<em> yyyyyyyy are the class flags you want to log.
</em> filename is the relative path of the file to which you want to save
the log.</p>
<p>The client stores the Appsrv.ini file in each user’s profile directory.
When starting the ICA session with event logging, add
<code>/iniappsrv:%userprofile%\”application data”\icaclient\appsrv.ini</code> to
the end of the command line above.</p>
<h3 id="deploying-client-virtual-channels-remotely"><a class="toclink" href="#deploying-client-virtual-channels-remotely">Deploying Client Virtual Channels Remotely</a></h3>
<p>To deploy virtual channels remotely, make changes based on the following
administrative template (.adm) file.</p>
<p>CustomVC is a placeholder for the channel name of the virtual channel.</p>
<div class="codehilite"><pre><span></span>;Group Policy template for Citrix Windows Receiver.
;Citrix Windows Receiver Client Extensions template
;Description:
;This file is provided as a base for third-party extensions
;to the Citrix Windows Receiver client.
; Copyright (C) Citrix Systems, Inc. All Rights Reserved.
;
CLASS MACHINE
CATEGORY !!Citrix 
    CATEGORY !!ICAClient
        CATEGORY !!Third Party
          #if version &gt;= 4
          EXPLAIN !!Explain_Third Party
          #endif
          ; Remotely define virtual channel 
          POLICY !!Policy_CustomVirtualChannel
            EXPLAIN !!Explain_CustomVirtualChannel
            KEYNAME &quot;Software\Policies\Citrix\ICA Client\Engine\Lockdown 
            Profiles\All Regions\Lockdown\Virtual Channels\Third 
            Party\CustomVC&quot;
            VALUENAME &quot;VCEnable&quot;
            VALUEON &quot;true,false&quot; VALUEOFF &quot;false&quot; ACTIONLISTON 
            KEYNAME &quot;Software\Citrix\ICA Client\Engine\Lockdown 
            Profiles\All Regions\Lockdown\Virtual Channels\Third 
            Party\CustomVC&quot;
                    VALUENAME &quot;VCEnable&quot; 
                    VALUE    &quot;&quot;
                    KEYNAME &quot;Software\Citrix\ICA 
            Client\Engine\Configuration\Advanced\Modules\ICA 3.0&quot;
                    VALUENAME &quot;VirtualDriverEx&quot; 
                    VALUE &quot;CustomVC&quot;
                    KEYNAME &quot;Software\Citrix\ICA            Client\Engine\Configuration\Advanced\Modules\CustomVC&quot;
                    VALUENAME &quot;DriverName&quot; 
                    VALUE &quot;Unsupported&quot; 
                    KEYNAME &quot;Software\Citrix\ICA
            Client\Engine\Configuration\Advanced\Modules\CustomVC&quot; 
                    VALUENAME &quot;DriverNameWin16&quot;
                    VALUE &quot;Unsupported&quot; 
                    KEYNAME &quot;Software\Citrix\ICA
            Client\Engine\Configuration\Advanced\Modules\CustomVC&quot; 
                    VALUENAME &quot;DriverNameWin32&quot; 
                    VALUE &quot;VDCustomVC.DLL&quot;
                END ACTIONLISTON 
                ACTIONLISTOFF
                    KEYNAME &quot;Software\Citrix\ICA 
            Client\Engine\Configuration\Advanced\Modules\ICA 3.0&quot;
                    VALUENAME &quot;VirtualDriverEx&quot; 
                    VALUE &quot;&quot;
                    END ACTIONLISTOFF
            END POLICY 
        END CATEGORY
    END CATEGORY 
END CATEGORY
[strings]
Citrix=&quot;Citrix Components&quot; 
ICAClient=&quot;Presentation Server Client&quot; 
Third Party=&quot;Extensions&quot;
Explain_Third Party=&quot;These policies control extensions to the standard Citrix Presentation Server Client.&quot;
Policy_CustomVirtualChannel=&quot;Additional Virtual Channel&quot;
Explain_CustomVirtualChannel=&quot; This policy controls a virtual
channel.\n\nSupplier:\nMy
company.\n\nReference:&quot;       
</pre></div>


<h3 id="administrative-template-changes-for-ping-example"><a class="toclink" href="#administrative-template-changes-for-ping-example">Administrative Template Changes for Ping Example</a></h3>
<p>For the ping virtual channel example, edit the .adm template file as
follows (changes in the text are in boldface).</p>
<div class="admonition tip">
<p class="admonition-title">Note<p>The Memory INI functions require the lines in the example
referencing VCEnable. Every parameter used by the virtual channel must
appear in this file. The client uses these to place security
restrictions on the virtual channels.</p>
</p>
</div>
<div class="codehilite"><pre><span></span>;
;   Group policy template for Citrix Windows Recevier Client
;   Ping virtual channel example template
;   Description;
;   A Group Policy template to remotely configure the Ping Virtual Channel
CLASS MACHINE
CATEGORY !! Citrix
    CATEGORY !! ICAClient
        CATEGORY !!Third Party
            #if version &gt;=4
              EXPLAIN !!Explain_Thrid Party
            #endif
            ;
            ;   Remotely configure the Ping Virtual Channel
            ;
            POLICY !!Policy_PingVirtualChannel
              EXPLAIN !!Explain_PingVirtualChannel
              KEYNAME &quot;Software\Policies\Citrix\ICA Client\Engine\Lockdown 
              Profiles\All Regions\Lockdown\Virtual Channels\Third Party\ping&quot;
                VALUENAME &quot;VCEnable&quot;
                VALUEON&quot;true,false&quot;
                VALUEOFF&quot;false&quot;
              ACTIONLISTON
                KEYNAME&quot;Software\Citrix\ICA Client\Engine\Lockdown\
                Profiles\All Regions\Lockdown\Virtual Channels\Third
                Party\ping&quot;
                  VALUENAME &quot;VCEnable&quot;
                  VALUE &quot;&quot;
                KEYNAME&quot;Software\Citrix\ICA Client\Engine\Configuration\Advanced\Module\ICA 3.0&quot;
                  VALUENAME &quot;VirtualDriverEx&quot;
                  VALUE &quot;ping&quot;
                KEYNAME&quot;Software\Citrix\ICA Client\Engine\Configuration\Advanced\Modules\ping&quot;
                  VALUENAME &quot;DriverName&quot;
                  VALUE &quot;Unsupported&quot;   
                KEYNAME &quot;Software\Citrix\ICA Client\Engine\Configuration\ Advanced\Modules\ping&quot;
                  VALUENAME &quot;DriverNameWin16&quot; 
                  VALUE &quot;Unsupported&quot;
                KEYNAME &quot;Software\Citrix\ICA Client\ Engine\Configuration\Advanced\Modules\ping&quot;
                  VALUENAME &quot;DriverNameWin32&quot; 
                  VALUE &quot;vdpingn.dll&quot;
              END ACTIONLISTON 
              ACTIONLISTOFF
                KEYNAME &quot;Software\Citrix\ICA Client\Engine\ Configuration\Advanced\Modules\ICA3.0&quot;
                  VALUENAME &quot;VirtualDriverEx&quot; 
                  VALUE &quot;&quot;
              END ACTIONLISTOFF
            END POLICY 
        END CATEGORY
    END CATEGORY
END CATEGORY
[strings]
    Citrix=&quot;Citrix Components&quot; 
    ICAClient=&quot;Presentation Server Client&quot; 
    Third Party=&quot;Extensions&quot;
    Explain_Third Party=&quot;These policies control extensions to the standard Citrix Presentation Server Client.&quot;  Policy_PingVirtualChannel=&quot;Example Ping Virtual Channel&quot; 
    Explain_PingVirtualChannel=&quot; This policy controls the example Ping virtual channel.\n\nSupplier:\n My company.\n                                \nReference:Example001&quot;
</pre></div>


<h3 id="best-practices"><a class="toclink" href="#best-practices">Best Practices</a></h3>
<p>Citrix recommends using the .adm file to customize the following parts of the Group</p>
<p>Policy GUI:</p>
<ul>
<li>Specify a name (Additional Virtual Channel in the template file) that describes the functionality provided by the virtual channel.</li>
<li>Description text </li>
<li>Supplier</li>
<li>Reference (for example, add a URL or email address to access further
information). </li>
<li>GUI that appears when the policy is double-clicked (optionally and as required).</li>
</ul>
<p>Do not change the name of the Citrix Components\Presentation Server
Client\Extensions folder.</p>
<p>Deploy the virtual channel DLL remotely using existing management tools
and enable and configure using the above GUI. You can do this to entire
groups of computers within an organization.</p>
              
               
            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../using-the-sdk/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../programming-guide/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
